<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>TypeRush — Typing Race Game</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body { margin:0; font-family:Inter, sans-serif; background:#0f172a; color:#e5e7eb; }
    .container { max-width:1000px; margin:0 auto; padding:1rem; }
    header { display:flex; justify-content:space-between; align-items:center; }
    .btn { background:linear-gradient(135deg,#22d3ee,#a78bfa); border:none; border-radius:8px; padding:0.6rem 1rem; font-weight:700; cursor:pointer; }
    .hud { display:grid; grid-template-columns:repeat(4,1fr); gap:0.8rem; margin:1rem 0; }
    .card { background:#111827; border-radius:10px; padding:0.8rem; }
    .label { color:#94a3b8; font-size:0.85rem; }
    .value { font-weight:700; font-size:1.3rem; }
    .track { position:relative; height:100px; background:#0b132b; border-radius:12px; margin:1rem 0; }
    .car { position:absolute; top:40px; left:0; width:28px; height:28px; background:linear-gradient(135deg,#22d3ee,#a78bfa); border-radius:6px; transition:transform 80ms ease-out; }
    .passage { background:#111827; border-radius:12px; padding:1rem; line-height:1.9; }
    .word { padding:2px 4px; border-radius:6px; }
    .word.current { background:rgba(34,211,238,0.15); }
    .word.correct { color:#34d399; }
    .word.incorrect { color:#f87171; text-decoration:underline wavy #f87171 1px; }
    .input { width:100%; margin-top:0.8rem; padding:0.8rem; border-radius:10px; border:none; background:#0b132b; color:#e5e7eb; }
    .countdown { font-weight:700; font-size:1.6rem; color:#94a3b8; margin-top:0.8rem; }
    .progress { height:10px; border-radius:999px; background:rgba(255,255,255,0.08); margin-top:0.8rem; }
    .progress>div { height:100%; width:0; background:linear-gradient(90deg,#22d3ee,#a78bfa); transition:width 100ms ease-out; }
    .results { display:none; margin-top:1rem; }
    footer { color:#94a3b8; text-align:center; margin-top:2rem; }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>TypeRush</h1>
      <button class="btn" id="restart">New Race</button>
    </header>

    <div class="hud">
      <div class="card"><div class="label">WPM</div><div class="value" id="wpm">0</div></div>
      <div class="card"><div class="label">Accuracy</div><div class="value" id="acc">100%</div></div>
      <div class="card"><div class="label">Errors</div><div class="value" id="errors">0</div></div>
      <div class="card"><div class="label">Time</div><div class="value" id="time">0.0s</div></div>
    </div>

    <div class="track"><div class="car" id="car"></div></div>

    <div class="card passage" id="passage"></div>
    <input class="input" id="input" type="text" placeholder="Type the current word and press space…" autocomplete="off"/>
    <div class="countdown" id="countdown">Get ready… 3</div>
    <div class="progress"><div id="progressBar"></div></div>

    <section class="results" id="results">
      <h2>Race Results</h2>
      <p>Final WPM: <span id="finalWpm">0</span></p>
      <p>Accuracy: <span id="finalAcc">0%</span></p>
      <p>Time: <span id="finalTime">0.0s</span></p>
    </section>

    <footer>© <span id="year"></span> TypeRush</footer>
  </div>

  <script>
    const words = ["drive","fast","clear","light","storm","river","craft","swift","space","mount","brave","sound","spark","focus","smart","build","shine","model","ready","skill","track","shift","trace","shape","move","power","rapid","fresh","signal","flow"];
    const el = {
      passage: document.getElementById('passage'),
      input: document.getElementById('input'),
      wpm: document.getElementById('wpm'),
      acc: document.getElementById('acc'),
      errors: document.getElementById('errors'),
      time: document.getElementById('time'),
      car: document.getElementById('car'),
      progress: document.getElementById('progressBar'),
      countdown: document.getElementById('countdown'),
      results: document.getElementById('results'),
      finalWpm: document.getElementById('finalWpm'),
      finalAcc: document.getElementById('finalAcc'),
      finalTime: document.getElementById('finalTime'),
      restart: document.getElementById('restart'),
      year: document.getElementById('year')
    };
    let state = { words:[], index:0, correctChars:0, errors:0, startTs:null, endTs:null, finished:false };

    function buildPassage(len=30){ return Array.from({length:len},()=>words[Math.floor(Math.random()*words.length)]); }
    function renderPassage(){ el.passage.innerHTML=''; state.words.forEach((w,i)=>{ const span=document.createElement('span'); span.textContent=w+(i<state.words.length-1?' ':''); span.className='word'+(i===0?' current':''); el.passage.appendChild(span); }); }
    function setCurrentWordClass(){ const children=el.passage.querySelectorAll('.word'); children.forEach((span,i)=>{ span.classList.remove('current','correct','incorrect'); if(i<state.index) span.classList.add('correct'); if(i===state.index) span.classList.add('current'); }); }
    function calcWpm(){ if(!state.startTs) return 0; const minutes=(Date.now()-state.startTs)/60000; const wordsByChars=state.correctChars/5; return Math.round(wordsByChars/Math.max(minutes,1e-6)); }
    function calcAcc(){ const typed=state.correctChars+state.errors; return typed===0?100:Math.round((state.correctChars/typed)*100); }
    function updateHud(){ el.wpm.textContent=calcWpm(); el.acc.textContent=calcAcc()+"%"; el.errors.textContent=state.errors; const elapsed=state.startTs?(Date.now()-state.startTs)/1000:0; el.time.textContent=elapsed.toFixed(1)+"s"; const progress=(state.index/state.words.length)*100; el.progress.style.width=progress+"%"; const trackWidth=document.querySelector('.track').clientWidth-40; el.car.style.transform=`translateX(${(progress/100)*trackWidth}px)`; }
    async function startCountdown(){ el.countdown.style.display='block'; el.input.disabled=true; for(let i=3;i>0;i--){ el.countdown.textContent=`Get ready… ${i}`; await new Promise(r=>setTimeout(r,1000)); } el.countdown.textContent='Go!'; await new Promise(r=>setTimeout(r,500)); el.countdown.style.display='none'; state.startTs=Date.now(); el.input.disabled=false; el.input.focus(); }
    function
